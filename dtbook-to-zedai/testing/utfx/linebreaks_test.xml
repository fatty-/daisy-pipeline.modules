<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="utfx_tests.rnc" type="compact"?>
<utfx:tests xmlns:utfx="http://utfx.org/test-definition"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.daisy.org/z3986/2005/dtbook/"
    xmlns:d2z="http://pipeline.daisy.org/ns/dtbook2zedai/">

    <utfx:stylesheet src="../src/convert-linebreaks.xsl"/>

    <utfx:test>
        <utfx:name>Many Different Elements With Linebreaks</utfx:name>
        <!-- This could be broken into many small tests, but it's not quite worth the time for this particular test. -->
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>

                <bodymatter>
                    <level>
                        <hd>This Test <br/> is about <br/> Linebreaks</hd>
                        <p>Filler</p>
                    </level>

                    <level1>
                        <h1>This Test <br/> is about <br/> Linebreaks</h1>

                        <p>
                            <span>This is a test for <br/> convert-linebreaks.xsl.</span>
                            <span>When the test is successful, instead of being broken by
                                &lt;br&gt;, each line will be wrapped by &gt;ln&lt; instead.</span>
                        </p>

                        <a href="http://example.org">Links <br/> may contain linebreaks</a>
                        <author>An author <br/> can have a linebreak <br/> in their name</author>
                        <p>
                            <span>
                                <bdo dir="ltr">BDO <br/> with <br/> Linebreak</bdo>
                            </span>
                        </p>
                        <bridgehead>Bridge <br/> Heads <br/> Can have Linebreaks too</bridgehead>


                        <byline>Byline1 <br/> Byline2</byline>

                        <cite>Cite1 <br/> Cite2</cite>

                        <dateline>Dateline1 <br/> dateline2</dateline>

                        <dl>
                            <dd>DD1 <br/> DD2</dd>
                            <dt>DT1 <br/> DT2</dt>
                        </dl>

                        <p>
                            <dfn>DFN1 <br/> DFN2</dfn>
                        </p>

                        <docauthor>Docauthor1 <br/> Docauthor2</docauthor>
                        <doctitle>Doctitle1 <br/> Doctitle2</doctitle>

                        <p>
                            <em>EM1 <br/> EM2</em>
                        </p>

                        <p>P1 <br/> P2</p>
                        <p>
                            <sent>SENT1 <br/> SENT2</sent>
                        </p>

                        <p>
                            <strong>STRONG1 <br/> STRONG2</strong>
                        </p>

                        <poem>
                            <title>TITLE1 <br/> TITLE2</title>

                            <line>LINE1 <br/> LINE2</line>

                        </poem>


                        <level2>
                            <h2>H2-1 <br/> H2-2</h2>
                            <p>Filler</p>

                            <level3>
                                <h3>H3-1 <br/> H3-2</h3>
                                <p>Filler</p>

                                <level4>
                                    <h4>H4-1 <br/> H4-2</h4>
                                    <p>Filler</p>

                                    <level5>
                                        <h5>H5-1 <br/> H5-2</h5>
                                        <p>Filler</p>

                                        <level6>
                                            <h6>H6-1 <br/> H6-2</h6>
                                            <p>Filler</p>
                                        </level6>

                                    </level5>


                                </level4>

                            </level3>

                        </level2>

                    </level1>

                </bodymatter>


            </utfx:source>
            <utfx:expected>
                <bodymatter>
                    <level>
                        <hd>
                            <d2z:ln>This Test</d2z:ln>
                            <d2z:ln>is about</d2z:ln>
                            <d2z:ln>Linebreaks</d2z:ln>
                        </hd>
                        <p>Filler</p>
                    </level>
                    <level1>
                        <h1>
                            <d2z:ln>This Test</d2z:ln>
                            <d2z:ln>is about</d2z:ln>
                            <d2z:ln>Linebreaks</d2z:ln>
                        </h1>

                        <p>
                            <span>
                                <d2z:ln>This is a test for</d2z:ln>
                                <d2z:ln>convert-linebreaks.xsl.</d2z:ln>
                            </span>
                            <span>When the test is successful, instead of being broken by
                                &lt;br&gt;, each line will be wrapped by &gt;ln&lt; instead.</span>
                        </p>

                        <a href="http://example.org">
                            <d2z:ln>Links</d2z:ln>
                            <d2z:ln>may contain linebreaks</d2z:ln>
                        </a>
                        <author>
                            <d2z:ln>An author</d2z:ln>
                            <d2z:ln>can have a linebreak</d2z:ln>
                            <d2z:ln>in their name</d2z:ln>
                        </author>
                        <p>
                            <span>
                                <bdo dir="ltr">
                                    <d2z:ln>BDO</d2z:ln>
                                    <d2z:ln>with</d2z:ln>
                                    <d2z:ln>Linebreak</d2z:ln>
                                </bdo>
                            </span>
                        </p>
                        <bridgehead>
                            <d2z:ln>Bridge</d2z:ln>
                            <d2z:ln>Heads</d2z:ln>
                            <d2z:ln>Can have Linebreaks too</d2z:ln>
                        </bridgehead>


                        <byline>
                            <d2z:ln>Byline1</d2z:ln>
                            <d2z:ln>Byline2</d2z:ln>
                        </byline>

                        <cite>
                            <d2z:ln>Cite1</d2z:ln>
                            <d2z:ln>Cite2</d2z:ln>
                        </cite>

                        <dateline>
                            <d2z:ln>Dateline1</d2z:ln>
                            <d2z:ln>dateline2</d2z:ln>
                        </dateline>

                        <dl>
                            <dd>
                                <d2z:ln>DD1</d2z:ln>
                                <d2z:ln>DD2</d2z:ln>
                            </dd>
                            <dt>
                                <d2z:ln>DT1</d2z:ln>
                                <d2z:ln>DT2</d2z:ln>
                            </dt>
                        </dl>

                        <p>
                            <dfn>
                                <d2z:ln>DFN1</d2z:ln>
                                <d2z:ln>DFN2</d2z:ln>
                            </dfn>
                        </p>

                        <docauthor>
                            <d2z:ln>Docauthor1</d2z:ln>
                            <d2z:ln>Docauthor2</d2z:ln>
                        </docauthor>
                        <doctitle>
                            <d2z:ln>Doctitle1</d2z:ln>
                            <d2z:ln>Doctitle2</d2z:ln>
                        </doctitle>

                        <p>
                            <em>
                                <d2z:ln>EM1</d2z:ln>
                                <d2z:ln>EM2</d2z:ln>
                            </em>
                        </p>

                        <p>
                            <d2z:ln>P1</d2z:ln>
                            <d2z:ln>P2</d2z:ln>
                        </p>
                        <p>
                            <sent>
                                <d2z:ln>SENT1</d2z:ln>
                                <d2z:ln>SENT2</d2z:ln>
                            </sent>
                        </p>

                        <p>
                            <strong>
                                <d2z:ln>STRONG1</d2z:ln>
                                <d2z:ln>STRONG2</d2z:ln>
                            </strong>
                        </p>

                        <poem>
                            <title>
                                <d2z:ln>TITLE1</d2z:ln>
                                <d2z:ln>TITLE2</d2z:ln>
                            </title>

                            <line>
                                <d2z:ln>LINE1</d2z:ln>
                                <d2z:ln>LINE2</d2z:ln>
                            </line>

                        </poem>


                        <level2>
                            <h2>
                                <d2z:ln>H2-1</d2z:ln>
                                <d2z:ln>H2-2</d2z:ln>
                            </h2>
                            <p>Filler</p>

                            <level3>
                                <h3>
                                    <d2z:ln>H3-1</d2z:ln>
                                    <d2z:ln>H3-2</d2z:ln>
                                </h3>
                                <p>Filler</p>

                                <level4>
                                    <h4>
                                        <d2z:ln>H4-1</d2z:ln>
                                        <d2z:ln>H4-2</d2z:ln>
                                    </h4>
                                    <p>Filler</p>

                                    <level5>
                                        <h5>
                                            <d2z:ln>H5-1</d2z:ln>
                                            <d2z:ln>H5-2</d2z:ln>
                                        </h5>
                                        <p>Filler</p>

                                        <level6>
                                            <h6>
                                                <d2z:ln>H6-1</d2z:ln>
                                                <d2z:ln>H6-2</d2z:ln>
                                            </h6>
                                            <p>Filler</p>
                                        </level6>

                                    </level5>


                                </level4>

                            </level3>

                        </level2>

                    </level1>

                </bodymatter>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
</utfx:tests>
